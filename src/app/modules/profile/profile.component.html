<app-top-app-bar *ngIf="bMobile" [title]="'Profil'">
</app-top-app-bar>

<div id="profile-page" class="full-page">
  <ng-container *ngIf="user$ | async as user; else loading">
    <div class="avatar">
      <img src="{{ user.photo_url }}" alt="avatar">
    </div>
    <p>{{ user.firstname }}</p>
    <p>{{ user.lastname }}</p>
  </ng-container>


  <ng-container *ngIf="events$ | async as events; else loading">
    <h2>Mes évènements</h2>
    <ng-container *ngFor="let event of events">
      <div *ngIf="event.participation == 1">
        <a (click)="goTo('/evenements/detail/' + event.id_event)">{{ event.title }}</a>
      </div>
    </ng-container>

    <h2>Mes participations</h2>
    <ng-container *ngFor="let event of events">
      <div *ngIf="event.participation == 2">
        <a (click)="goTo('/evenements/detail/' + event.id_event)">{{ event.title }}</a>
      </div>
    </ng-container>
  </ng-container>

  <button mat-raised-button (click)="goTo('/profil/edition')">Modifier le profil</button>
  <button mat-raised-button (click)="logout()" color="secondary">Se déconnecter</button>
</div>

<ng-template #loading>
  <p>Chargement...</p>
</ng-template>