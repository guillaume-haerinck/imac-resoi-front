<app-top-app-bar *ngIf="bMobile" [title]="'Édition du profil'" [bReturn]="true" (return)="goTo('/profil')">
</app-top-app-bar>

<div id="edit-profile-page">
  <form [formGroup]="userForm">
    <mat-vertical-stepper [linear]="false">
      <!-- Step 1 -->
      <mat-step label="Identité">
        <mat-form-field appearance="fill">
          <mat-label>Avatar</mat-label>
          <input matInput type="url" formControlName="photo_url">
          <mat-error>Vous devez spécifier une url d'image</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Pseudo</mat-label>
          <input matInput placeholder="CrousMan" formControlName="pseudo" required>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Prénom</mat-label>
          <input matInput placeholder="George" formControlName="firstname" required>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Nom</mat-label>
          <input matInput placeholder="Brassens" formControlName="lastname" required>
        </mat-form-field>
      </mat-step>

      <!-- Step 2 -->
      <mat-step label="Contact">
        <mat-form-field appearance="fill">
          <mat-label>Email</mat-label>
          <input matInput placeholder="jesuisleroi@dumonde.com" type="email" formControlName="mail" required>
          <mat-error>Email invalide !</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Promotion</mat-label>
          <mat-select placeholder="Promotion" formControlName="year_promotion" required>
            <mat-option value="2021">2021</mat-option>
            <mat-option value="2020">2020</mat-option>
            <mat-option value="2019">2019</mat-option>
            <mat-option value="2018">2018</mat-option>
            <mat-option value="2017">2017</mat-option>
            <mat-option value="2016">2016</mat-option>
            <mat-option value="autre">Autre</mat-option>
          </mat-select>
          <mat-error>Veuillez indiquer votre promotion</mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Téléphone</mat-label>
          <input matInput type="tel" formControlName="phone">
        </mat-form-field>
      </mat-step>

      <!-- Step 3 -->
      <mat-step label="Zone de danger extrême">
        <button mat-raised-button (click)="goTo('/profil/change-mdp')">Changer le mot de passe</button>
        <button mat-raised-button color="warn" (click)="deleteUser()">Supprimer le compte</button>
      </mat-step>
    </mat-vertical-stepper>
  </form>

  <button mat-raised-button (click)="goTo('/profil')">Retour</button>
  <button mat-raised-button color="accent" [disabled]="!userForm.valid" (click)="submitForm()">Modifier</button>
</div>
